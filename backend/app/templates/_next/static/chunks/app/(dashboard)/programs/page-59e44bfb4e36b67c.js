(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{36893:(e,a,r)=>{Promise.resolve().then(r.bind(r,86453))},69818:(e,a,r)=>{"use strict";r.d(a,{Av:()=>c,M0:()=>n,N0:()=>i,Uu:()=>l,bd:()=>o,lC:()=>m,pZ:()=>d,vf:()=>s});let t="http://127.0.0.1:5000/api/colleges",o=async()=>{let e=await fetch("".concat(t,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),a=await e.json();return console.log("Fetched colleges:",a.colleges),a},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"collegeCode",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",n=new URLSearchParams({page:e.toString(),per_page:a.toString(),search:r,searchBy:"all"===o?"all":o,sortBy:l,order:s}),c=await fetch("".concat(t,"?").concat(n.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await c.json();return console.log("Total colleges:",i.total),i},s=async()=>{let e=await fetch("".concat(t,"/dropdown"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Server returned:",await e.text()),Error("Failed to fetch colleges");return(await e.json()).colleges},n=async(e,a)=>{let r=await fetch("".concat(t,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({collegeCode:e,collegeName:a})});if(!r.ok)throw Error((await r.json()).error||"Unknown error");return await r.json()},c=async e=>{let a=await fetch("".concat(t,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok)throw console.error("Fetch failed with status:",a.status),Error("Failed to fetch college");return await a.json()},i=async(e,a,r)=>{let o=await fetch("".concat(t,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({collegeCode:a,collegeName:r})}),l=await o.json();if(!o.ok)throw Error(l.error||"Failed to update college");return l.college},d=async e=>{let a=await fetch("".concat(t,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}),r=a.headers.get("content-type");if(!a.ok)if(null==r?void 0:r.includes("application/json"))throw Error((await a.json()).error||"Failed to delete college");else throw Error("Unexpected server error");return await a.json()};async function m(){let e=await fetch("http://127.0.0.1:5000/api/colleges/total",{method:"GET",credentials:"include"});return(await e.json()).total}},72907:(e,a,r)=>{"use strict";r.d(a,{C$:()=>o,El:()=>i,GD:()=>d,VC:()=>l,Xv:()=>c,em:()=>s,rC:()=>n,ys:()=>m});let t="http://127.0.0.1:5000/api/programs",o=async()=>{let e=await fetch("".concat(t,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),a=await e.json();return console.log("Fetched programs:",a.programs),a},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"programCode",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",n=new URLSearchParams({page:e.toString(),per_page:a.toString(),search:r,searchBy:"all"===o?"all":o,sortBy:l,order:s}),c=await fetch("".concat(t,"?").concat(n.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await c.json();return console.log("Total programs:",i.total),i},s=async()=>{let e=await fetch("".concat(t,"/dropdown"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Server returned:",await e.text()),Error("Failed to fetch programs");return(await e.json()).programs},n=async(e,a,r)=>{let o=await fetch("".concat(t,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({programCode:e,programName:a,collegeCode:r})});if(!o.ok)throw Error((await o.json()).error||"Unknown error");return await o.json()},c=async e=>{let a=await fetch("".concat(t,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok)throw console.error("Fetch failed with status:",a.status),Error("Failed to fetch program");let r=await a.json();return console.log("Fetched program:",r),r},i=async(e,a,r,o)=>{let l=await fetch("".concat(t,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({programCode:a,programName:r,collegeCode:o})}),s=await l.json();if(!l.ok)throw Error(s.error||"Failed to update program");return s.program},d=async e=>{let a=await fetch("".concat(t,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error((await a.json()).message||"Failed to delete program");return await a.json()};async function m(){let e=await fetch("http://127.0.0.1:5000/api/programs/total",{method:"GET",credentials:"include"});return(await e.json()).total}},86453:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>P});var t=r(95155),o=r(37772),l=r(97003),s=r(7220),n=r(42179),c=r(53e3),i=r(50533),d=r(36820),m=r(57972),h=r(33952),g=r(12115),p=r(54679),u=r(33789),x=r(90235),j=r(47507),C=r(69818),y=r(41152),f=r(72907);function w(e){let{onProgramAdded:a}=e,[r,o]=(0,g.useState)(null),[s,n]=(0,g.useState)([]),[c,i]=(0,g.useState)(""),[d,m]=(0,g.useState)(""),[h,w]=(0,g.useState)(""),[N,v]=(0,g.useState)(""),[S,b]=(0,g.useState)(!1),[E,T]=(0,g.useState)(!1);(0,g.useEffect)(()=>{(async()=>{try{let e=await (0,C.vf)();n(e)}catch(e){console.error("Failed to load colleges:",e)}})()},[]);let P=async()=>{if(T(!0),!c.trim()||!d.trim()||!h.trim()){v("Please fill in all fields."),T(!1);return}try{let e=await (0,f.rC)(c,d,h);o(e.program),i(""),m(""),w(""),v(""),b(!1),null==a||a()}catch(e){e instanceof Error?"Program code already exists"===e.message?v("Program Code (".concat(c,") is already taken.")):"Missing required fields"===e.message?v("Please fill in all required fields."):v(e.message||"Something went wrong. Try again."):v("Something went wrong. Try again.")}finally{T(!1)}},k=()=>{i(""),m(""),w(""),v("")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(p.lG,{open:S,onOpenChange:e=>{e?b(!0):(k(),b(!1))},children:[(0,t.jsx)(p.zM,{asChild:!0,className:"cursor-pointer",children:(0,t.jsx)(l.$,{variant:"default",size:"sm",children:"Add Program"})}),(0,t.jsxs)(p.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(p.c7,{children:[(0,t.jsx)(p.L3,{children:"Add a new Program"}),(0,t.jsx)(p.rr,{children:"Fill in the details below to add a program."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.J,{htmlFor:"programCode",children:"Program Code"}),(0,t.jsx)(u.p,{id:"programCode",placeholder:"e.g. BSCS",value:c,onChange:e=>i(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.J,{htmlFor:"programName",children:"Program Name"}),(0,t.jsx)(u.p,{id:"programName",placeholder:"e.g. Bachelor of Science in Computer Science",value:d,onChange:e=>m(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.J,{htmlFor:"collegeCode",children:"College"}),(0,t.jsxs)(j.l6,{value:h,onValueChange:w,children:[(0,t.jsx)(j.bq,{children:(0,t.jsx)(j.yv,{placeholder:"Select a college"})}),(0,t.jsx)(j.gC,{className:"max-h-[300px] overflow-y-auto",children:s.map(e=>(0,t.jsxs)(j.eb,{value:e.collegeCode,children:[e.collegeName," (",e.collegeCode,")"]},e.collegeCode))})]})]}),N&&(0,t.jsx)("p",{className:"mt-2 text-sm text-red-600",children:N})]}),(0,t.jsxs)(p.Es,{children:[(0,t.jsx)(l.$,{type:"button",variant:"outline",className:"mr-auto cursor-pointer",onClick:k,children:"Reset"}),(0,t.jsx)(p.HM,{asChild:!0,children:(0,t.jsx)(l.$,{className:"cursor-pointer",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(l.$,{className:"cursor-pointer",type:"submit",onClick:P,disabled:E,children:E?"Saving...":"Save"})]})]})]}),r&&(0,t.jsx)(y.p,{entityType:"Program",entity:{code:r.programCode,name:r.programName},actionType:"added",onClose:()=>o(null)})]})}function N(e){let{program:a,visible:r,onClose:o,onProgramUpdated:s}=e,[n,c]=(0,g.useState)([]),[i,d]=(0,g.useState)(a.programCode),[m,h]=(0,g.useState)(a.programName),[w,N]=(0,g.useState)(a.collegeCode),[v,S]=(0,g.useState)(null),[b,E]=(0,g.useState)(""),[T,P]=(0,g.useState)(!1);(0,g.useEffect)(()=>{r&&(d(a.programCode),h(a.programName),N(a.collegeCode),E(""),(async()=>{try{let e=await (0,f.Xv)(a.programCode);d(e.programCode),h(e.programName),N(e.collegeCode)}catch(e){console.error("Failed to fetch program data:",e)}})())},[r,a.programCode,a.programName,a.collegeCode]),(0,g.useEffect)(()=>{(async()=>{try{let e=await (0,C.vf)();c(e)}catch(e){console.error("Failed to load colleges:",e)}})()},[]);let k=async()=>{let e=a.programCode;if(P(!0),!i.trim()||!m.trim()||!w.trim())return void E("Please fill in all fields.");if(i.trim()===e.trim()&&m.trim()===a.programName.trim()&&w.trim()===a.collegeCode.trim()){E("No changes detected."),P(!1);return}try{let a=await (0,f.El)(e,i,m,w);S(a),E("")}catch(e){e instanceof Error?"Program code already exists"===e.message?E("Program Code (".concat(i,") is already taken.")):"Missing required fields"===e.message?E("Please fill in all required fields."):E(e.message||"Something went wrong. Try again."):E("Something went wrong. Try again.")}finally{P(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.lG,{open:r,onOpenChange:e=>{e||o()},children:(0,t.jsxs)(p.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(p.c7,{children:[(0,t.jsx)(p.L3,{children:"Edit Program"}),(0,t.jsx)(p.rr,{children:"Update the fields below to modify this program."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.J,{htmlFor:"programCode",children:"Program Code"}),(0,t.jsx)(u.p,{id:"programCode",value:i,placeholder:"e.g. BSCS",onChange:e=>d(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.J,{htmlFor:"programName",children:"Program Name"}),(0,t.jsx)(u.p,{id:"programName",value:m,placeholder:"e.g. Bachelor of Science in Computer Science",onChange:e=>h(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(x.J,{htmlFor:"collegeCode",children:"College"}),(0,t.jsxs)(j.l6,{value:w,onValueChange:N,children:[(0,t.jsx)(j.bq,{children:(0,t.jsx)(j.yv,{placeholder:"Select a college"})}),(0,t.jsx)(j.gC,{children:n.map(e=>(0,t.jsxs)(j.eb,{value:e.collegeCode,children:[e.collegeName," (",e.collegeCode,")"]},e.collegeCode))})]})]}),b&&(0,t.jsx)("p",{className:"mt-2 text-sm text-red-600",children:b})]}),(0,t.jsxs)(p.Es,{children:[(0,t.jsx)(l.$,{type:"button",variant:"outline",className:"mr-auto cursor-pointer",onClick:()=>{d(""),h(""),N(""),E("")},children:"Reset"}),(0,t.jsx)(p.HM,{asChild:!0,children:(0,t.jsx)(l.$,{className:"cursor-pointer",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(l.$,{className:"cursor-pointer",type:"submit",onClick:k,disabled:T,children:T?"Saving Changes...":"Save Changes"})]})]})}),v&&(0,t.jsx)(y.p,{entityType:"Program",entity:{code:v.programCode,name:v.programName},actionType:"updated",onClose:()=>{S(null),null==s||s(),o()}})]})}function v(e){let{program:a,visible:r,onClose:o,onProgramDeleted:s}=e,[n,c]=(0,g.useState)(null),[i,d]=(0,g.useState)(!1),m=async()=>{d(!0);try{await (0,f.GD)(a.programCode),c(a)}catch(e){console.error("Failed to delete program:",e)}finally{d(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.lG,{open:r,onOpenChange:e=>{e||o()},children:(0,t.jsxs)(p.Cf,{children:[(0,t.jsx)(p.c7,{children:(0,t.jsx)(p.L3,{children:"Confirm Deletion"})}),(0,t.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,t.jsx)("strong",{children:a.programName})," (",a.programCode,")"]}),(0,t.jsxs)(p.Es,{children:[(0,t.jsx)(l.$,{className:"cursor-pointer",variant:"secondary",onClick:()=>o(),children:"Cancel"}),(0,t.jsx)(l.$,{className:"cursor-pointer",variant:"destructive",type:"submit",disabled:i,onClick:m,children:i?"Deleting...":"Delete"})]})]})}),n&&(0,t.jsx)(y.p,{entityType:"College",entity:{code:a.programCode,name:a.programName},actionType:"deleted",onClose:()=>{c(null),null==s||s(),o()}})]})}var S=r(4259),b=r(15310),E=r(99733),T=r(68122);function P(){let e,{authenticated:a,loading:r}=(0,S.A)(),[p,u]=(0,g.useState)(!1),[x,C]=(0,g.useState)([]),[y,P]=(0,g.useState)(0),[k,F]=(0,g.useState)(null),[A,$]=(0,g.useState)(null),[G,O]=(0,g.useState)(""),[J,D]=(0,g.useState)("all"),[U,B]=(0,g.useState)("programCode"),[_,q]=(0,g.useState)("asc"),[L,M]=(0,g.useState)(1),[V,z]=(0,g.useState)(1),R=(0,g.useCallback)(async()=>{u(!0);try{let e=await (0,f.VC)(L,15,G,J,U,_);C(e.programs),z(e.pages),P(e.total)}catch(e){console.error("Failed to load programs:",e)}finally{u(!1)}},[L,G,J,U,_]);return((0,g.useEffect)(()=>{a&&R()},[a,R]),r)?(0,t.jsx)(b.J,{}):a||r?(0,t.jsxs)("div",{className:"container w-full justify-center px-6",children:[(0,t.jsx)("div",{className:"container mb-2",children:(0,t.jsx)("h1",{className:"mb text-2xl font-semibold tracking-wide",children:"Programs"})}),(0,t.jsxs)("div",{className:"mb-4 flex",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(E.D,{value:G,onChange:O,total:y}),(0,t.jsxs)(j.l6,{value:J,onValueChange:e=>D(e),children:[(0,t.jsx)(j.bq,{className:"w-[150px] cursor-pointer",children:(0,t.jsx)(j.yv,{placeholder:"Search By"})}),(0,t.jsxs)(j.gC,{children:[(0,t.jsx)(j.eb,{className:"cursor-pointer",value:"all",children:"Search By"}),(0,t.jsx)(j.eb,{className:"cursor-pointer",value:"programCode",children:"Program Code"}),(0,t.jsx)(j.eb,{className:"cursor-pointer",value:"programName",children:"Program Name"}),(0,t.jsx)(j.eb,{className:"cursor-pointer",value:"collegeCode",children:"College Code"})]})]})]}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)(w,{onProgramAdded:R})})]}),(0,t.jsx)("div",{className:"container",children:p?(0,t.jsx)(T.E,{className:"container mx-auto h-[600px] rounded-xl py-10"}):0===x.length?(0,t.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"No data."}):(0,t.jsxs)("div",{className:"mb-2 opacity-100 transition-opacity duration-300",children:[(0,t.jsx)(h.b,{columns:(e=e=>{F(e)},[{accessorKey:"programCode",size:150,header:()=>(0,t.jsxs)(l.$,{onClick:()=>{"programCode"===U?q("asc"===_?"desc":"asc"):(B("programCode"),q("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Program Code","programCode"===U?"asc"===_?(0,t.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,t.jsx)(i.A,{className:"text-primary ml-2 h-4 w-4"}):(0,t.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var a;let{getValue:r}=e;return null!=(a=r())?a:"—"}},{accessorKey:"programName",size:500,header:()=>(0,t.jsxs)(l.$,{onClick:()=>{"programName"===U?q("asc"===_?"desc":"asc"):(B("programName"),q("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Program Name","programName"===U?"asc"===_?(0,t.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,t.jsx)(i.A,{className:"text-primary ml-2 h-4 w-4"}):(0,t.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var a;let{getValue:r}=e;return null!=(a=r())?a:"—"}},{accessorKey:"collegeCode",header:()=>(0,t.jsxs)(l.$,{onClick:()=>{"collegeCode"===U?q("asc"===_?"desc":"asc"):(B("collegeCode"),q("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["College Code","collegeCode"===U?"asc"===_?(0,t.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,t.jsx)(i.A,{className:"text-primary ml-2 h-4 w-4"}):(0,t.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{let{row:a}=e,r=a.getValue("collegeCode");return"N/A"===r?(0,t.jsx)("span",{className:"text-muted-foreground italic",children:"N/A"}):r}},{id:"actions",size:100,cell:a=>{let{row:r}=a,c=r.original;return(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(s.rI,{children:[(0,t.jsx)(s.ty,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"ghost",className:"h-5 w-8 cursor-pointer p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(o.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(s.SQ,{align:"end",children:[(0,t.jsx)(s.lp,{children:"Actions"}),(0,t.jsx)(s.mB,{}),(0,t.jsxs)(l.$,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>e(c),children:[(0,t.jsx)("span",{children:"Edit"}),(0,t.jsx)(n.A,{className:"text-muted-foreground h-4 w-4"})]}),(0,t.jsxs)(l.$,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>$(c),children:[(0,t.jsx)("span",{children:"Delete"}),(0,t.jsx)(m.A,{className:"text-muted-foreground h-4 w-4"})]})]})]})})}}]),data:x,page:L,totalPages:V,setPage:M}),k&&(0,t.jsx)(N,{program:k,visible:!0,onClose:()=>F(null),onProgramUpdated:()=>{R(),F(null)}}),A&&(0,t.jsx)(v,{program:A,visible:!0,onClose:()=>$(null),onProgramDeleted:()=>{R(),$(null)}})]})})]}):(0,t.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"Redirecting to login..."})}}},e=>{e.O(0,[186,1,179,40,897,91,52,441,255,358],()=>e(e.s=36893)),_N_E=e.O()}]);