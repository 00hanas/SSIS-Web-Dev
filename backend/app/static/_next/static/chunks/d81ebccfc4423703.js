(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>r,"CardHeader",()=>o,"CardTitle",()=>s]);var l=e.i(43476),t=e.i(47163);function a(e){let{className:a,...o}=e;return(0,l.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...o})}function o(e){let{className:a,...o}=e;return(0,l.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...o})}function s(e){let{className:a,...o}=e;return(0,l.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",a),...o})}function r(e){let{className:a,...o}=e;return(0,l.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",a),...o})}function n(e){let{className:a,...o}=e;return(0,l.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",a),...o})}},10708,e=>{"use strict";e.s(["Label",()=>r],10708);var l=e.i(43476),t=e.i(71645),a=e.i(48425),o=t.forwardRef((e,t)=>(0,l.jsx)(a.Primitive.label,{...e,ref:t,onMouseDown:l=>{var t;l.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,l),!l.defaultPrevented&&l.detail>1&&l.preventDefault())}}));o.displayName="Label";var s=e.i(47163);function r(e){let{className:t,...a}=e;return(0,l.jsx)(o,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},92877,e=>{"use strict";e.s(["default",()=>w],92877);var l=e.i(43476),t=e.i(90239),a=e.i(41071),o=e.i(67881),s=e.i(63415),r=e.i(66040),n=e.i(96944),i=e.i(9244),c=e.i(71645),d=e.i(30374),g=e.i(23750),u=e.i(10708),m=e.i(32363),h=e.i(66953);function x(e){let{onCollegeAdded:t}=e,[a,s]=(0,c.useState)(null),[r,n]=(0,c.useState)(""),[i,x]=(0,c.useState)(""),[C,p]=(0,c.useState)(""),[j,f]=(0,c.useState)(!1),N=async()=>{if(!r.trim()||!i.trim())return void p("Please fill in both fields.");try{let e=await (0,m.createCollege)(r,i);s(e.college),n(""),x(""),p(""),f(!1),null==t||t()}catch(e){e instanceof Error?"College code already exists"===e.message?p("College Code (".concat(r,") is already taken.")):"Missing required fields"===e.message?p("Please fill in both College Code and College Name."):p(e.message||"Something went wrong. Try again."):p("Something went wrong. Try again.")}},y=()=>{n(""),x(""),p("")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.Dialog,{open:j,onOpenChange:e=>{e?f(!0):(y(),f(!1))},children:[(0,l.jsx)(d.DialogTrigger,{asChild:!0,className:"cursor-pointer",children:(0,l.jsx)(o.Button,{variant:"default",size:"sm",onClick:()=>f(!0),children:"Add College"})}),(0,l.jsxs)(d.DialogContent,{className:"sm:max-w-md",children:[(0,l.jsxs)(d.DialogHeader,{children:[(0,l.jsx)(d.DialogTitle,{children:"Add a new College"}),(0,l.jsx)(d.DialogDescription,{children:"Fill in the details below to add a college."})]}),(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(u.Label,{htmlFor:"collegeCode",children:"College Code"}),(0,l.jsx)(g.Input,{id:"collegeCode",placeholder:"e.g. CCS",value:r,onChange:e=>n(e.target.value)})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(u.Label,{htmlFor:"collegeName",children:"College Name"}),(0,l.jsx)(g.Input,{id:"collegeName",placeholder:"e.g. College of Computer Studies",value:i,onChange:e=>x(e.target.value)})]}),C&&(0,l.jsx)("p",{className:"mt-2 text-sm text-red-600",children:C})]}),(0,l.jsxs)(d.DialogFooter,{children:[(0,l.jsx)(o.Button,{type:"button",variant:"outline",className:"mr-auto cursor-pointer",onClick:y,children:"Reset"}),(0,l.jsx)(d.DialogClose,{asChild:!0,children:(0,l.jsx)(o.Button,{className:"cursor-pointer",variant:"secondary",children:"Cancel"})}),(0,l.jsx)(o.Button,{className:"cursor-pointer",type:"button",onClick:N,children:"Save"})]})]})]}),a&&(0,l.jsx)(h.EntityConfirmationDialog,{entityType:"College",entity:{code:a.collegeCode,name:a.collegeName},actionType:"added",onClose:()=>s(null)})]})}function C(e){let{college:t,visible:a,onClose:s,onCollegeUpdated:r}=e,[n,i]=(0,c.useState)(t.collegeCode),[x,C]=(0,c.useState)(t.collegeName),[p,j]=(0,c.useState)(null),[f,N]=(0,c.useState)("");(0,c.useEffect)(()=>{a&&(i(t.collegeCode),C(t.collegeName),N(""),(async()=>{try{let e=await (0,m.fetchCollege)(t.collegeCode);i(e.collegeCode),C(e.collegeName)}catch(e){console.error("Failed to fetch college data:",e)}})())},[a,t.collegeCode,t.collegeName]);let y=async()=>{let e=t.collegeCode;if(!n.trim()||!x.trim())return void N("Please fill in both fields.");if(n.trim()===e.trim()&&x.trim()===t.collegeName.trim())return void N("No changes detected.");try{let l=await (0,m.updateCollege)(e,n,x);j(l),N("")}catch(e){e instanceof Error?"College code already exists"===e.message?N("College Code (".concat(n,") is already taken.")):"Missing required fields"===e.message?N("Please fill in both College Code and College Name."):N(e.message||"Something went wrong. Try again."):N("Something went wrong. Try again.")}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Dialog,{open:a,onOpenChange:e=>{e||s()},children:(0,l.jsxs)(d.DialogContent,{className:"sm:max-w-md",children:[(0,l.jsxs)(d.DialogHeader,{children:[(0,l.jsx)(d.DialogTitle,{children:"Edit College"}),(0,l.jsx)(d.DialogDescription,{children:"Update the fields below to modify this college."})]}),(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(u.Label,{htmlFor:"collegeCode",children:"College Code"}),(0,l.jsx)(g.Input,{id:"collegeCode",value:n,placeholder:"e.g. CCS",onChange:e=>i(e.target.value)})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(u.Label,{htmlFor:"collegeName",children:"College Name"}),(0,l.jsx)(g.Input,{id:"collegeName",value:x,placeholder:"e.g. College of Computer Studies",onChange:e=>C(e.target.value)})]}),f&&(0,l.jsx)("p",{className:"mt-2 text-sm text-red-600",children:f})]}),(0,l.jsxs)(d.DialogFooter,{children:[(0,l.jsx)(o.Button,{type:"button",variant:"outline",className:"mr-auto cursor-pointer",onClick:()=>{i(""),C(""),N("")},children:"Reset"}),(0,l.jsx)(d.DialogClose,{asChild:!0,children:(0,l.jsx)(o.Button,{className:"cursor-pointer",variant:"secondary",children:"Cancel"})}),(0,l.jsx)(o.Button,{className:"cursor-pointer",type:"button",onClick:y,children:"Save Changes"})]})]})}),p&&(0,l.jsx)(h.EntityConfirmationDialog,{entityType:"College",entity:{code:p.collegeCode,name:p.collegeName},actionType:"updated",onClose:()=>{j(null),null==r||r(),s()}})]})}function p(e){let{college:t,visible:a,onClose:s,onCollegeDeleted:r}=e,[n,i]=(0,c.useState)(null),g=async()=>{try{await (0,m.deleteCollege)(t.collegeCode),i(t)}catch(e){console.error("Failed to delete college:",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Dialog,{open:a,onOpenChange:e=>{e||s()},children:(0,l.jsxs)(d.DialogContent,{children:[(0,l.jsx)(d.DialogHeader,{children:(0,l.jsx)(d.DialogTitle,{children:"Confirm Deletion"})}),(0,l.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,l.jsx)("strong",{children:t.collegeName})," (",t.collegeCode,")?"]}),(0,l.jsxs)(d.DialogFooter,{children:[(0,l.jsx)(o.Button,{className:"cursor-pointer",variant:"secondary",onClick:()=>s(),children:"Cancel"}),(0,l.jsx)(o.Button,{className:"cursor-pointer",variant:"destructive",onClick:g,children:"Delete"})]})]})}),n&&(0,l.jsx)(h.EntityConfirmationDialog,{entityType:"College",entity:{code:n.collegeCode,name:n.collegeName},actionType:"deleted",onClose:()=>{i(null),null==r||r(),s()}})]})}var j=e.i(24136),f=e.i(88077),N=e.i(78823),y=e.i(71428),v=e.i(62870),S=e.i(20733);function w(){let e,{authenticated:d,loading:g}=(0,j.useAuth)(),[u,m]=(0,c.useState)(!0),[h,w]=(0,c.useState)(!1),[b,D]=(0,c.useState)([]),[T,B]=(0,c.useState)(0),[k,F]=(0,c.useState)(0),[I,L]=(0,c.useState)(0),[E,M]=(0,c.useState)(null),[P,A]=(0,c.useState)(null),[H,O]=(0,c.useState)("all"),[R,K]=(0,c.useState)(""),[U,z]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{try{let{colleges:e,total:l}=await (0,S.loadColleges)();D(e),B(l)}catch(e){console.error("Failed to load colleges:",e)}finally{m(!1)}})()},[]),(0,c.useEffect)(()=>{(async()=>{try{let{total:e}=await (0,S.loadPrograms)();F(e)}catch(e){console.error("Failed to load programs:",e)}})()},[]),(0,c.useEffect)(()=>{(async()=>{try{let{total:e}=await (0,S.loadStudents)();L(e)}catch(e){console.error("Failed to load students:",e)}})()},[]);let q=async()=>{w(!0);try{let{colleges:e,total:l}=await (0,S.loadColleges)();D(e),B(l)}catch(e){console.error("Failed to refresh colleges:",e)}finally{w(!1)}},V=b.filter(e=>{let l=R.toLowerCase();return!l||("collegeCode"===H?e.collegeCode.toLowerCase().includes(l):"collegeName"===H?e.collegeName.toLowerCase().includes(l):e.collegeCode.toLowerCase().includes(l)||e.collegeName.toLowerCase().includes(l))});return g||u?(0,l.jsx)(f.PageSkeleton,{}):d||g?(0,l.jsxs)("div",{className:"container w-full justify-center px-6",children:[(0,l.jsx)(t.CardDemographic,{colleges:T,programs:k,students:I}),(0,l.jsxs)("div",{className:"container mt-5 mb-2 flex flex-col",children:[(0,l.jsx)("h1",{className:"mb text-2xl font-semibold tracking-wide",children:"Colleges"}),(0,l.jsx)("p",{className:"mb tracking-wide",children:"Here's the list of colleges."})]}),(0,l.jsxs)("div",{className:"mb-4 flex",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(N.SearchInput,{value:R,onChange:K,total:V.length}),(0,l.jsxs)(v.Select,{value:H,onValueChange:e=>O(e),children:[(0,l.jsx)(v.SelectTrigger,{className:"w-[150px] cursor-pointer",children:(0,l.jsx)(v.SelectValue,{placeholder:"Search By"})}),(0,l.jsxs)(v.SelectContent,{children:[(0,l.jsx)(v.SelectItem,{className:"cursor-pointer",value:"all",children:"Search By"}),(0,l.jsx)(v.SelectItem,{className:"cursor-pointer",value:"collegeCode",children:"College Code"}),(0,l.jsx)(v.SelectItem,{className:"cursor-pointer",value:"collegeName",children:"College Name"})]})]})]}),(0,l.jsx)("div",{className:"ml-auto",children:(0,l.jsx)(x,{onCollegeAdded:q})})]}),(0,l.jsx)("div",{className:"container",children:h?(0,l.jsx)(y.Skeleton,{className:"container mx-auto h-[300px] rounded-xl py-10"}):0===b.length?(0,l.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"No data."}):(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"mb-2 opacity-100 transition-opacity duration-300",children:[(0,l.jsx)(i.DataTable,{columns:(e=e=>{M(e)},[{accessorKey:"collegeCode",size:150,header:e=>{let{column:t}=e;return(0,l.jsxs)(o.Button,{onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["College Code","asc"===t.getIsSorted(),"desc"===t.getIsSorted()]})},cell:e=>{var l;let{getValue:t}=e;return null!=(l=t())?l:"—"}},{accessorKey:"collegeName",header:e=>{let{column:t}=e;return(0,l.jsxs)(o.Button,{onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["College Name","asc"===t.getIsSorted(),"desc"===t.getIsSorted()]})},cell:e=>{var l;let{getValue:t}=e;return null!=(l=t())?l:"—"}},{id:"actions",cell:t=>{let{row:i}=t,c=i.original;return(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsxs)(s.DropdownMenu,{children:[(0,l.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsxs)(o.Button,{variant:"ghost",className:"h-5 w-8 cursor-pointer p-0",children:[(0,l.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,l.jsx)(a.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,l.jsxs)(s.DropdownMenuContent,{align:"end",children:[(0,l.jsx)(s.DropdownMenuLabel,{children:"Actions"}),(0,l.jsx)(s.DropdownMenuSeparator,{}),(0,l.jsxs)(o.Button,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>e(c),children:["Edit",(0,l.jsx)(r.default,{className:"text-muted-foreground h-4 w-4"})]}),(0,l.jsxs)(o.Button,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>A(c),children:["Delete",(0,l.jsx)(n.default,{className:"text-muted-foreground h-4 w-4"})]})]})]})})}}]),data:V,sorting:U,setSorting:z}),E&&(0,l.jsx)(C,{college:E,visible:!0,onClose:()=>M(null),onCollegeUpdated:()=>{q(),M(null)}}),P&&(0,l.jsx)(p,{college:P,visible:!0,onClose:()=>A(null),onCollegeDeleted:()=>{q(),A(null)}})]})})})]}):(0,l.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"Redirecting to login..."})}}]);