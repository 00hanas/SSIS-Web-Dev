(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{8525:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(63503).UU)("https://liofppzunluhdsrbwogc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxpb2ZwcHp1bmx1aGRzcmJ3b2djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3OTAyODQsImV4cCI6MjA3ODM2NjI4NH0.AHUpJy0wD4HEw1ImsdL4CKWYvLn0sfUelXUH_VmQpNM")},61184:(e,t,r)=>{"use strict";r.d(t,{LP:()=>d,O7:()=>g,VN:()=>l,cm:()=>u,dp:()=>c,j6:()=>j,jJ:()=>x,kd:()=>n,lM:()=>m,oC:()=>o,s5:()=>i,tC:()=>h,tH:()=>p});var a=r(8525);let s="http://127.0.0.1:5000/api/students",l=async()=>{let e=await fetch("".concat(s,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();return console.log("Fetched students:",t.students),t},n=async function(){var e,t,r;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"studentID",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=new URLSearchParams({page:a.toString(),per_page:l.toString(),search:n,searchBy:i,sortBy:o,order:c});(null==(e=d.programCode)?void 0:e.length)&&u.append("programCode",d.programCode.join(",")),(null==(t=d.gender)?void 0:t.length)&&u.append("gender",d.gender.join(",")),(null==(r=d.yearLevel)?void 0:r.length)&&u.append("yearLevel",d.yearLevel.join(","));let h=await fetch("".concat(s,"?").concat(u.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});return await h.json()},i=async(e,t,r,a,l,n,i)=>{let o=await fetch("".concat(s,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentID:e,firstName:t,lastName:r,programCode:a,yearLevel:l,gender:n,photoUrl:i})});if(!o.ok)throw Error((await o.json()).error||"Unknown error");return await o.json()},o=async e=>{let t=await fetch("".concat(s,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw console.error("Fetch failed with status:",t.status),Error("Failed to fetch student");let r=await t.json();return console.log("Fetched student:",r),r},c=async(e,t,r,a,l,n,i,o)=>{let c=await fetch("".concat(s,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentID:t,firstName:r,lastName:a,programCode:l,yearLevel:n,gender:i,photoUrl:o})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to update student");return d.student},d=async e=>{let t=await fetch("".concat(s,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).message||"Failed to delete student");return await t.json()},u=async e=>{let t=new URLSearchParams;"all"!==e&&t.set("programCode",e);let r=await fetch("".concat(s,"/by-program?").concat(t.toString()),{method:"GET",credentials:"include"});if(!r.ok)throw Error("Failed to fetch students by program");return(await r.json()).students};async function h(){let e=await fetch("http://127.0.0.1:5000/api/students/count-by-program",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch counts");return e.json()}async function m(){let e=await fetch("http://127.0.0.1:5000/api/students/count-by-gender",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch gender counts");return e.json()}async function p(){let e=await fetch("http://127.0.0.1:5000/api/students/total",{method:"GET",credentials:"include"});return(await e.json()).total}async function x(e){try{let t="".concat(e,"/"),{data:r,error:s}=await a.N.storage.from("students-photos").list(t,{limit:1e3});if(s)return void console.error("Error listing files:",s);if(!r||0===r.length)return void console.log("No files found in folder:",t);let l=r.map(e=>"".concat(t).concat(e.name)),{error:n}=await a.N.storage.from("students-photos").remove(l);if(n)return void console.error("Error deleting files:",n);console.log("Deleted all files under ".concat(t))}catch(e){console.error("Unexpected error deleting folder:",e)}}async function g(e,t,r){let s=null;if(e!==t){let{data:r,error:l}=await a.N.storage.from("students-photos").list(e);if(l)return console.error("Error listing files:",l),null;for(let l of r){let r="".concat(e,"/").concat(l.name),n="".concat(t,"/").concat(l.name);await a.N.storage.from("students-photos").copy(r,n),await a.N.storage.from("students-photos").remove([r]);let{data:i}=a.N.storage.from("students-photos").getPublicUrl(n);s=i.publicUrl}}if(r){let{data:e,error:l}=await a.N.storage.from("students-photos").list(t);if(!l&&e&&e.length>0){let r=e.map(e=>"".concat(t,"/").concat(e.name));await a.N.storage.from("students-photos").remove(r)}let n="".concat(t,"/").concat(Date.now(),"-").concat(r.name),{error:i}=await a.N.storage.from("students-photos").upload(n,r,{upsert:!0});if(!i){let{data:e}=a.N.storage.from("students-photos").getPublicUrl(n);s=e.publicUrl}}return s}async function j(e,t){try{let e=t.split("/students-photos/");if(e.length<2)return!1;let r=e[1],{error:s}=await a.N.storage.from("students-photos").remove([r]);if(s)throw s;return!0}catch(e){return console.error("Failed to delete photo:",e),!1}}},68400:(e,t,r)=>{Promise.resolve().then(r.bind(r,88716))},72907:(e,t,r)=>{"use strict";r.d(t,{C$:()=>s,El:()=>c,GD:()=>d,VC:()=>l,Xv:()=>o,em:()=>n,rC:()=>i,ys:()=>u});let a="http://127.0.0.1:5000/api/programs",s=async()=>{let e=await fetch("".concat(a,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();return console.log("Fetched programs:",t.programs),t},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"programCode",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",i=new URLSearchParams({page:e.toString(),per_page:t.toString(),search:r,searchBy:"all"===s?"all":s,sortBy:l,order:n}),o=await fetch("".concat(a,"?").concat(i.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),c=await o.json();return console.log("Total programs:",c.total),c},n=async()=>{let e=await fetch("".concat(a,"/dropdown"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Server returned:",await e.text()),Error("Failed to fetch programs");return(await e.json()).programs},i=async(e,t,r)=>{let s=await fetch("".concat(a,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({programCode:e,programName:t,collegeCode:r})});if(!s.ok)throw Error((await s.json()).error||"Unknown error");return await s.json()},o=async e=>{let t=await fetch("".concat(a,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw console.error("Fetch failed with status:",t.status),Error("Failed to fetch program");let r=await t.json();return console.log("Fetched program:",r),r},c=async(e,t,r,s)=>{let l=await fetch("".concat(a,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({programCode:t,programName:r,collegeCode:s})}),n=await l.json();if(!l.ok)throw Error(n.error||"Failed to update program");return n.program},d=async e=>{let t=await fetch("".concat(a,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).message||"Failed to delete program");return await t.json()};async function u(){let e=await fetch("http://127.0.0.1:5000/api/programs/total",{method:"GET",credentials:"include"});return(await e.json()).total}},88716:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eu});var a=r(95155),s=r(37772),l=r(97003),n=r(7220),i=r(42179),o=r(53e3),c=r(50533),d=r(36820),u=r(57972);let h=(0,r(28619).A)((0,a.jsx)("path",{d:"M12 2c-4.97 0-9 4.03-9 9 0 4.17 2.84 7.67 6.69 8.69L12 22l2.31-2.31C18.16 18.67 21 15.17 21 11c0-4.97-4.03-9-9-9m0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m0 14.3c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22"}),"PersonPin");var m=r(15239),p=r(33952),x=r(12115),g=r(54679),j=r(33789),f=r(90235),v=r(47507),y=r(72907),N=r(61184),w=r(41152),b=r(8525);function C(e){let{onStudentAdded:t}=e,[r,s]=(0,x.useState)(null),[n,i]=(0,x.useState)([]),[o,c]=(0,x.useState)(""),[d,u]=(0,x.useState)(""),[h,p]=(0,x.useState)(""),[C,S]=(0,x.useState)(""),[k,F]=(0,x.useState)(""),[E,I]=(0,x.useState)(""),[L,D]=(0,x.useState)(""),[A,T]=(0,x.useState)(!1),[P,U]=(0,x.useState)(null),[J,$]=(0,x.useState)(null),G=(0,x.useRef)(null),[O,M]=(0,x.useState)(!1);(0,x.useEffect)(()=>{(async()=>{try{let e=await (0,y.em)();i(e)}catch(e){console.error("Failed to load programs:",e)}})()},[]);let R=async()=>{if(M(!0),!o.trim()||!d.trim()||!h.trim()||!C.trim()||!k.trim()||!E.trim()){D("Please fill in all fields."),M(!1);return}if(!/^\d{4}-\d{4}$/.test(o.trim())){D("Student ID must follow the format XXXX-XXXX using digits only."),M(!1);return}if(P){if(!["image/jpg","image/jpeg","image/png","image/svg+xml"].includes(P.type)){D("Only image files are allowed."),G.current&&(G.current.value=""),M(!1);return}if(P.size>2097152){D("Photo must be smaller than 2 MB."),G.current&&(G.current.value=""),M(!1);return}}try{let e="/student-icon.jpg";if(P){let t="".concat(o,"/").concat(Date.now(),"-").concat(P.name),{error:r}=await b.N.storage.from("students-photos").upload(t,P);if(r)console.error("Upload error:",r);else{let{data:r}=b.N.storage.from("students-photos").getPublicUrl(t);e=r.publicUrl}}let r=await (0,N.s5)(o,d,h,C,parseInt(k),E,e||"/student-icon.jpg");s(r.student),z(),T(!1),null==t||t()}catch(e){e instanceof Error?"Student ID already exists"===e.message?D("Student ID (".concat(o,") is already taken.")):"Missing required fields"===e.message?D("Please fill in all required fields."):D(e.message||"Something went wrong. Try again."):D("Something went wrong. Try again.")}finally{M(!1)}},z=()=>{c(""),u(""),p(""),S(""),F(""),I(""),U(null),$(null),D("")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.lG,{open:A,onOpenChange:e=>{e?T(!0):(z(),T(!1))},children:[(0,a.jsx)(g.zM,{asChild:!0,className:"cursor-pointer",children:(0,a.jsx)(l.$,{variant:"default",size:"sm",children:"Add Student"})}),(0,a.jsxs)(g.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(g.c7,{children:[(0,a.jsx)(g.L3,{children:"Add a new Student"}),(0,a.jsx)(g.rr,{children:"Fill in the details below to add a student."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(f.J,{htmlFor:"photo",children:"Photo (optional)"}),(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[J?(0,a.jsx)(m.default,{src:J,alt:"Preview",width:120,height:120,className:"!h-20 !w-20 rounded-full border border-gray-300 object-cover"}):(0,a.jsx)("div",{className:"flex !h-20 !w-20 cursor-pointer items-center justify-center rounded-full bg-gray-100 text-gray-500",children:(0,a.jsx)("span",{className:"text-3xl font-bold",children:"+"})}),J&&(0,a.jsx)(l.$,{variant:"destructive",size:"icon",onClick:()=>{U(null),$(null),G.current&&(G.current.value="")},className:"absolute -top-2 -right-2 !h-5 !w-5 rounded-full bg-red-500 text-white hover:bg-red-600",children:"✕"})]}),(0,a.jsx)(l.$,{variant:"outline",onClick:()=>{var e;return null==(e=G.current)?void 0:e.click()},className:"px-4 py-2",children:J?"Change Photo":"Upload Photo"}),(0,a.jsx)("input",{ref:G,id:"photo",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;let r=(null==(t=e.target.files)?void 0:t[0])||null;U(r),r&&$(URL.createObjectURL(r))}})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"studentID",children:"Student ID"}),(0,a.jsx)(j.p,{id:"studentID",placeholder:"e.g. 2023-0001",value:o,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>4&&(t=t.slice(0,4)+"-"+t.slice(4,8)),c(t)},maxLength:9})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"firstName",children:"First Name"}),(0,a.jsx)(j.p,{id:"firstName",placeholder:"e.g. Juhanara",value:d,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"lastName",children:"Last Name"}),(0,a.jsx)(j.p,{id:"lastName",placeholder:"e.g. Saluta",value:h,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"programCode",children:"Program"}),(0,a.jsxs)(v.l6,{value:C,onValueChange:S,children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Select a program"})}),(0,a.jsx)(v.gC,{className:"max-h-[300px] overflow-y-auto",children:Array.isArray(n)&&n.map(e=>(0,a.jsxs)(v.eb,{value:e.programCode,children:[e.programName," (",e.programCode,")"]},e.programCode))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"yearLevel",children:"Year Level"}),(0,a.jsxs)(v.l6,{value:k,onValueChange:F,children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Select year level"})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{value:"1",children:"1"}),(0,a.jsx)(v.eb,{value:"2",children:"2"}),(0,a.jsx)(v.eb,{value:"3",children:"3"}),(0,a.jsx)(v.eb,{value:"4",children:"4"}),(0,a.jsx)(v.eb,{value:"5",children:"5"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"gender",children:"Gender"}),(0,a.jsxs)(v.l6,{value:E,onValueChange:I,children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Select a gender"})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{value:"Female",children:"Female"}),(0,a.jsx)(v.eb,{value:"Male",children:"Male"})]})]})]}),L&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",children:L})]}),(0,a.jsxs)(g.Es,{children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",className:"mr-auto cursor-pointer",onClick:z,children:"Reset"}),(0,a.jsx)(g.HM,{asChild:!0,children:(0,a.jsx)(l.$,{className:"cursor-pointer",variant:"secondary",children:"Cancel"})}),(0,a.jsx)(l.$,{className:"cursor-pointer",type:"submit",onClick:R,disabled:O,children:O?"Saving...":"Save"})]})]})]}),r&&(0,a.jsx)(w.p,{entityType:"Student",entity:{code:r.studentID,name:"".concat(r.firstName," ").concat(r.lastName)},actionType:"added",onClose:()=>s(null)})]})}function S(e){let{student:t,visible:r,onClose:s,onStudentUpdated:n}=e,[i,o]=(0,x.useState)([]),[c,d]=(0,x.useState)(t.studentID),[u,h]=(0,x.useState)(t.firstName),[p,b]=(0,x.useState)(t.lastName),[C,S]=(0,x.useState)(t.programCode),[k,F]=(0,x.useState)(t.yearLevel),[E,I]=(0,x.useState)(t.gender),[L,D]=(0,x.useState)(null),[A,T]=(0,x.useState)(""),[P,U]=(0,x.useState)(t.photoUrl),[J,$]=(0,x.useState)(null),G=(0,x.useRef)(null),[O,M]=(0,x.useState)(!1);(0,x.useEffect)(()=>{r&&(d(t.studentID),h(t.firstName),b(t.lastName),S(t.programCode),F(t.yearLevel),I(t.gender),U(t.photoUrl),T(""),(async()=>{try{let e=await (0,N.oC)(t.studentID);d(e.studentID),h(e.firstName),b(e.lastName),S(e.programCode),F(e.yearLevel),I(e.gender),U(e.photoUrl)}catch(e){console.error("Failed to fetch student data:",e)}})())},[r,t.studentID,t.firstName,t.lastName,t.programCode,t.yearLevel,t.gender,t.photoUrl]),(0,x.useEffect)(()=>{(async()=>{try{let e=await (0,y.em)();o(e)}catch(e){console.error("Failed to load programs:",e),o([])}})()},[]);let R=async()=>{M(!0);let e=t.studentID;if(!c.trim()||!u.trim()||!p.trim()||!C.trim()||!k.toString().trim()||!E.trim()){T("Please fill in all fields."),M(!1);return}if(!/^\d{4}-\d{4}$/.test(c.trim())){T("Student ID must follow the format YYYY-NNNN."),M(!1);return}if(c.trim()===e.trim()&&u.trim()===t.firstName.trim()&&p.trim()===t.lastName.trim()&&C.trim()===t.programCode.trim()&&k===t.yearLevel&&E.trim()===t.gender.trim()&&t.photoUrl===P){T("No changes detected."),M(!1);return}if(J){if(!["image/jpg","image/jpeg","image/png","image/svg+xml"].includes(J.type)){T("Only image files are allowed."),M(!1);return}if(J.size>2097152){T("Photo must be smaller than 2 MB."),G.current&&(G.current.value=""),M(!1);return}}try{let r=P||"/student-icon.jpg";if(J){let t=await (0,N.O7)(e,c.trim(),J);t&&(r=t)}else if(e!==c.trim()){let t=await (0,N.O7)(e,c.trim());t&&(r=t)}else"/student-icon.jpg"===P&&t.photoUrl&&"/student-icon.jpg"!==t.photoUrl&&(await (0,N.j6)(e,t.photoUrl),r="/student-icon.jpg");let a=await (0,N.dp)(e,c.trim(),u.trim(),p.trim(),C.trim(),k,E.trim(),r);D(a),T("")}catch(e){e instanceof Error?"Student ID already exists"===e.message?T("Student ID (".concat(c,") is already taken.")):"Missing required fields"===e.message?T("Please fill in all required fields."):T(e.message||"Something went wrong. Try again."):T("Something went wrong. Try again.")}finally{M(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.lG,{open:r,onOpenChange:e=>{e||s()},children:(0,a.jsxs)(g.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(g.c7,{children:[(0,a.jsx)(g.L3,{children:"Edit Student"}),(0,a.jsx)(g.rr,{children:"Update the fields below to modify this student."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(f.J,{htmlFor:"photo",children:"Photo (optional)"}),(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[P&&"/student-icon.jpg"!==P?(0,a.jsx)(m.default,{src:P,alt:"Current student photo",width:120,height:120,className:"!h-20 !w-20 rounded-full border border-gray-300 object-cover"}):(0,a.jsx)("div",{className:"flex !h-20 !w-20 cursor-pointer items-center justify-center rounded-full bg-gray-100 text-gray-500",onClick:()=>{var e;return null==(e=G.current)?void 0:e.click()},children:(0,a.jsx)("span",{className:"text-3xl font-bold",children:"+"})}),P&&"/student-icon.jpg"!==P&&(0,a.jsx)(l.$,{variant:"destructive",size:"icon",onClick:()=>{$(null),U("/student-icon.jpg"),G.current&&(G.current.value="")},className:"absolute -top-2 -right-2 !h-5 !w-5 rounded-full bg-red-500 text-white hover:bg-red-600",children:"✕"})]}),(0,a.jsx)(l.$,{variant:"outline",onClick:()=>{var e;return null==(e=G.current)?void 0:e.click()},className:"px-4 py-2",children:P&&"/student-icon.jpg"!==P?"Change Photo":"Upload Photo"}),(0,a.jsx)("input",{ref:G,id:"photo",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;let r=(null==(t=e.target.files)?void 0:t[0])||null;$(r),r&&U(URL.createObjectURL(r))}})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"studentID",children:"Student ID"}),(0,a.jsx)(j.p,{id:"studentID",value:c,placeholder:"e.g. 2023-0001",onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>4&&(t=t.slice(0,4)+"-"+t.slice(4,8)),d(t)},maxLength:9})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"firstName",children:"First Name"}),(0,a.jsx)(j.p,{id:"firstName",value:u,placeholder:"e.g. Juhanara",onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"lastName",children:"Last Name"}),(0,a.jsx)(j.p,{id:"lastName",value:p,placeholder:"e.g. Saluta",onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"programCode",children:"Program"}),(0,a.jsxs)(v.l6,{value:C,onValueChange:S,children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Select a program"})}),(0,a.jsx)(v.gC,{children:i.map(e=>(0,a.jsxs)(v.eb,{value:e.programCode,children:[e.programName," (",e.programCode,")"]},e.programCode))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"yearLevel",children:"Year Level"}),(0,a.jsxs)(v.l6,{value:k.toString(),onValueChange:e=>F(Number(e)),children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Select year level"})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{value:"1",children:"1"}),(0,a.jsx)(v.eb,{value:"2",children:"2"}),(0,a.jsx)(v.eb,{value:"3",children:"3"}),(0,a.jsx)(v.eb,{value:"4",children:"4"}),(0,a.jsx)(v.eb,{value:"5",children:"5"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(f.J,{htmlFor:"gender",children:"Gender"}),(0,a.jsxs)(v.l6,{value:E,onValueChange:I,children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Select a gender"})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{value:"Female",children:"Female"}),(0,a.jsx)(v.eb,{value:"Male",children:"Male"})]})]})]}),A&&(0,a.jsx)("div",{className:"text-sm text-red-600",children:A})]}),(0,a.jsxs)(g.Es,{children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",className:"mr-auto cursor-pointer",onClick:()=>{d(""),h(""),b(""),S(""),F(0),I(""),U(""),T("")},children:"Reset"}),(0,a.jsx)(g.HM,{asChild:!0,children:(0,a.jsx)(l.$,{className:"cursor-pointer",variant:"secondary",children:"Cancel"})}),(0,a.jsx)(l.$,{className:"cursor-pointer",type:"submit",onClick:R,disabled:O,children:O?"Saving Changes...":"Save"})]})]})}),L&&(0,a.jsx)(w.p,{entityType:"Student",entity:{code:L.studentID,name:"".concat(L.firstName," ").concat(L.lastName)},actionType:"updated",onClose:()=>{D(null),null==n||n(),s()}})]})}function k(e){let{student:t,visible:r,onClose:s,onStudentDeleted:n}=e,[i,o]=(0,x.useState)(null),[c,d]=(0,x.useState)(!1),u=async()=>{d(!0);try{await (0,N.jJ)(t.studentID),await (0,N.LP)(t.studentID),o(t)}catch(e){console.error("Failed to delete student:",e)}finally{d(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.lG,{open:r,onOpenChange:e=>{e||s()},children:(0,a.jsxs)(g.Cf,{children:[(0,a.jsx)(g.c7,{children:(0,a.jsx)(g.L3,{children:"Confirm Deletion"})}),(0,a.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,a.jsxs)("strong",{children:[t.firstName," ",t.lastName]})," ","(",t.studentID,")"]}),(0,a.jsxs)(g.Es,{children:[(0,a.jsx)(l.$,{className:"cursor-pointer",variant:"secondary",onClick:()=>s(),children:"Cancel"}),(0,a.jsx)(l.$,{className:"cursor-pointer",variant:"destructive",type:"submit",disabled:c,onClick:u,children:c?"Deleting...":"Delete"})]})]})}),i&&(0,a.jsx)(w.p,{entityType:"Student",entity:{code:t.studentID,name:"".concat(t.firstName," ").concat(t.lastName)},actionType:"deleted",onClose:()=>{o(null),null==n||n(),s()}})]})}var F=r(4259),E=r(15310),I=r(99733),L=r(68122),D=r(32467),A=r(83101),T=r(25016);let P=(0,A.F)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function U(e){let{className:t,variant:r,asChild:s=!1,...l}=e,n=s?D.DX:"span";return(0,a.jsx)(n,{"data-slot":"badge",className:(0,T.cn)(P({variant:r}),t),...l})}function J(e){let{student:t,visible:r,onClose:s}=e,[l,n]=(0,x.useState)(t),[i,o]=(0,x.useState)([]);(0,x.useEffect)(()=>{r&&(async()=>{try{let e=await (0,N.oC)(t.studentID);n(e)}catch(e){console.error("Failed to fetch student data:",e)}})()},[r,t.studentID]),(0,x.useEffect)(()=>{(async()=>{try{let e=await (0,y.em)();o(e)}catch(e){console.error("Failed to load programs:",e),o([])}})()},[]);let c=i.find(e=>e.programCode===l.programCode);return(0,a.jsx)(g.lG,{open:r,onOpenChange:e=>{e||s()},children:(0,a.jsxs)(g.Cf,{className:"sm:max-w-[400px]",children:[(0,a.jsx)(g.c7,{children:(0,a.jsx)(g.L3,{children:"Student Profile"})}),(0,a.jsxs)("div",{className:"container mt-5 mb-3",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-row",children:[l.photoUrl?(0,a.jsx)(m.default,{src:l.photoUrl,alt:"".concat(l.firstName," ").concat(l.lastName),width:150,height:150,className:"!h-15 !w-15 rounded-full object-cover"}):null,(0,a.jsxs)("div",{className:"ml-4 flex flex-col",children:[(0,a.jsxs)("span",{className:"mb-1 text-[18px] font-medium tracking-wide",children:[l.firstName," ",l.lastName]}),(0,a.jsx)(U,{className:"text-[10px] tracking-wide",children:l.studentID})]})]}),(0,a.jsxs)("div",{className:"mr-5 ml-5 flex flex-col gap-2 rounded-sm p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-5 flex flex-col",children:[(0,a.jsx)("span",{className:"text-muted-foreground mb-2 text-[11px] tracking-wide",children:"Program"}),c?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-sm",children:c.programName})}):(0,a.jsx)("span",{className:"text-sm",children:l.programCode})]}),(0,a.jsxs)("div",{className:"mb-5 flex flex-col",children:[(0,a.jsx)("span",{className:"text-muted-foreground mb-2 text-[11px] tracking-wide",children:"College"}),c?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-sm",children:c.collegeCode})}):(0,a.jsx)("span",{className:"text-sm",children:"N/A"})]}),(0,a.jsxs)("div",{className:"mb-5 flex flex-col",children:[(0,a.jsx)("span",{className:"text-muted-foreground mb-2 text-[11px] tracking-wide",children:"Year Level"}),(0,a.jsx)("span",{className:"text-sm",children:l.yearLevel})]}),(0,a.jsxs)("div",{className:"mb-5 flex flex-col",children:[(0,a.jsx)("span",{className:"text-muted-foreground mb-2 text-[11px] tracking-wide",children:"Gender"}),(0,a.jsx)("span",{className:"text-sm",children:l.gender})]})]})]})]})})}var $=r(94446),G=r(3468),O=r(92556),M=r(23558),R=r(78108),z=r(84288),V=r(76842),X=r(88142),q="Checkbox",[Y,_]=(0,G.A)(q),[K,B]=Y(q);function H(e){let{__scopeCheckbox:t,checked:r,children:s,defaultChecked:l,disabled:n,form:i,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[m,p]=(0,M.i)({prop:r,defaultProp:null!=l&&l,onChange:c,caller:q}),[g,j]=x.useState(null),[f,v]=x.useState(null),y=x.useRef(!1),N=!g||!!i||!!g.closest("form"),w={checked:m,disabled:n,setChecked:p,control:g,setControl:j,name:o,form:i,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:!es(l)&&l,isFormControl:N,bubbleInput:f,setBubbleInput:v};return(0,a.jsx)(K,{scope:t,...w,children:"function"==typeof h?h(w):s})}var Q="CheckboxTrigger",Z=x.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:s,onClick:l,...n}=e,{control:i,value:o,disabled:c,checked:d,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:j}=B(Q,r),f=(0,$.s)(t,h),v=x.useRef(d);return x.useEffect(()=>{let e=null==i?void 0:i.form;if(e){let t=()=>m(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,m]),(0,a.jsx)(X.sG.button,{type:"button",role:"checkbox","aria-checked":es(d)?"mixed":d,"aria-required":u,"data-state":el(d),"data-disabled":c?"":void 0,disabled:c,value:o,...n,ref:f,onKeyDown:(0,O.mK)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,O.mK)(l,e=>{m(e=>!!es(e)||!e),j&&g&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});Z.displayName=Q;var W=x.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:l,defaultChecked:n,required:i,disabled:o,value:c,onCheckedChange:d,form:u,...h}=e;return(0,a.jsx)(H,{__scopeCheckbox:r,checked:l,defaultChecked:n,disabled:o,required:i,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:e=>{let{isFormControl:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z,{...h,ref:t,__scopeCheckbox:r}),s&&(0,a.jsx)(ea,{__scopeCheckbox:r})]})}})});W.displayName=q;var ee="CheckboxIndicator",et=x.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...l}=e,n=B(ee,r);return(0,a.jsx)(V.C,{present:s||es(n.checked)||!0===n.checked,children:(0,a.jsx)(X.sG.span,{"data-state":el(n.checked),"data-disabled":n.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});et.displayName=ee;var er="CheckboxBubbleInput",ea=x.forwardRef((e,t)=>{let{__scopeCheckbox:r,...s}=e,{control:l,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:o,required:c,disabled:d,name:u,value:h,form:m,bubbleInput:p,setBubbleInput:g}=B(er,r),j=(0,$.s)(t,g),f=(0,R.Z)(i),v=(0,z.X)(l);x.useEffect(()=>{if(!p)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!n.current;if(f!==i&&e){let r=new Event("click",{bubbles:t});p.indeterminate=es(i),e.call(p,!es(i)&&i),p.dispatchEvent(r)}},[p,f,i,n]);let y=x.useRef(!es(i)&&i);return(0,a.jsx)(X.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=o?o:y.current,required:c,disabled:d,name:u,value:h,form:m,...s,tabIndex:-1,ref:j,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function es(e){return"indeterminate"===e}function el(e){return es(e)?"indeterminate":e?"checked":"unchecked"}ea.displayName=er;var en=r(5917);function ei(e){let{className:t,...r}=e;return(0,a.jsx)(W,{"data-slot":"checkbox",className:(0,T.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(et,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,a.jsx)(en.A,{className:"size-3.5"})})})}let eo=(0,r(71847).A)("list-filter-plus",[["path",{d:"M12 5H2",key:"1o22fu"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 8V2",key:"1wcffq"}]]);var ec=r(24033);function ed(e){let{filters:t,setFilters:r,availableOptions:s}=e,[i,o]=(0,x.useState)(""),c=(e,t)=>{r(r=>{let a=r[e],s=a.includes(t);return{...r,[e]:s?a.filter(e=>e!==t):[...a,t]}})},d=t.yearLevels.length>0||t.genders.length>0||t.programCodes.length>0,u=s.programCodes.filter(e=>e.toLowerCase().includes(i.toLowerCase()));return(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-[200px]",children:[(0,a.jsx)(eo,{}),d?"Filters Applied":"Add Filters"]})}),(0,a.jsxs)(n.SQ,{className:"w-[200px] space-y-3 p-3",children:[(0,a.jsx)(n.lp,{children:"Active Filters"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.yearLevels.map(e=>(0,a.jsxs)(U,{className:"cursor-pointer",onClick:()=>c("yearLevels",e),children:["Year Level: ",e," ✕"]},"year-".concat(e))),t.genders.map(e=>(0,a.jsxs)(U,{className:"cursor-pointer",onClick:()=>c("genders",e),children:["Gender: ",e," ✕"]},"gender-".concat(e))),t.programCodes.map(e=>(0,a.jsxs)(U,{className:"cursor-pointer",onClick:()=>c("programCodes",e),children:["Program: ",e," ✕"]},"prog-".concat(e))),!d&&(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"No filters applied"})]}),d&&(0,a.jsx)("div",{children:(0,a.jsx)(l.$,{variant:"ghost",className:"w-full text-red-500",onClick:()=>r(()=>({yearLevels:[],genders:[],programCodes:[]})),children:"Clear all filters"})}),(0,a.jsx)(n.mB,{}),(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-between",children:["Gender",(0,a.jsx)(ec.A,{className:"ml-2 h-4 w-4"})]})}),(0,a.jsx)(n.SQ,{className:"w-full p-2",children:s.genders.map(e=>(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,a.jsx)(ei,{id:"gender-".concat(e),checked:t.genders.includes(e),onCheckedChange:()=>c("genders",e)}),(0,a.jsx)("label",{htmlFor:"gender-".concat(e),className:"w-full text-sm",children:e})]},e))})]}),(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-between",children:["Year Level",(0,a.jsx)(ec.A,{className:"ml-2 h-4 w-4"})]})}),(0,a.jsx)(n.SQ,{className:"p-2",children:s.yearLevels.map(e=>(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,a.jsx)(ei,{id:"year-".concat(e),checked:t.yearLevels.includes(e),onCheckedChange:()=>c("yearLevels",e)}),(0,a.jsx)("label",{htmlFor:"year-".concat(e),className:"text-sm",children:e})]},e))})]}),(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-between",children:["Program Code",(0,a.jsx)(ec.A,{className:"ml-2 h-4 w-4"})]})}),(0,a.jsxs)(n.SQ,{className:"w-full space-y-2 p-2",children:[(0,a.jsx)(j.p,{placeholder:"Search programs...",value:i,onChange:e=>o(e.target.value)}),(0,a.jsx)("div",{className:"max-h-40 space-y-1 overflow-y-auto pr-1",children:u.map(e=>(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,a.jsx)(ei,{id:"prog-".concat(e),checked:t.programCodes.includes(e),onCheckedChange:()=>c("programCodes",e)}),(0,a.jsx)("label",{htmlFor:"prog-".concat(e),className:"w-full text-sm",children:e})]},e))})]})]})]})]})}function eu(){let e,t,{authenticated:r,loading:g}=(0,F.A)(),[j,f]=(0,x.useState)(!1),[w,b]=(0,x.useState)([]),[D,A]=(0,x.useState)(0),[T,P]=(0,x.useState)(null),[U,$]=(0,x.useState)(null),[G,O]=(0,x.useState)(null),[M,R]=(0,x.useState)(""),[z,V]=(0,x.useState)("all"),[X,q]=(0,x.useState)("studentID"),[Y,_]=(0,x.useState)("asc"),[K,B]=(0,x.useState)(1),[H,Q]=(0,x.useState)(1),[Z,W]=(0,x.useState)([]),[ee,et]=(0,x.useState)({yearLevels:[],genders:[],programCodes:[]}),er=(0,x.useCallback)(async()=>{f(!0);try{let e={programCode:ee.programCodes,gender:ee.genders,yearLevel:ee.yearLevels},t=await (0,N.kd)(K,10,M,z,X,Y,e);b(t.students),Q(t.pages),A(t.total)}catch(e){console.error("Failed to load students:",e)}finally{f(!1)}},[K,M,z,X,Y,ee]),ea=(0,x.useCallback)(async()=>{f(!0);try{let e=(await (0,y.em)()).map(e=>e.programCode);W(e)}catch(e){console.error("Failed to fetch program codes:",e)}finally{f(!1)}},[]);return((0,x.useEffect)(()=>{r&&(er(),ea())},[r,er,ea]),(0,x.useEffect)(()=>{r&&er()},[ee]),g)?(0,a.jsx)(E.J,{}):r||g?(0,a.jsxs)("div",{className:"container w-full justify-center px-6",children:[(0,a.jsx)("div",{className:"container mb-2",children:(0,a.jsx)("h1",{className:"mb text-2xl font-semibold tracking-wide",children:"Students"})}),(0,a.jsxs)("div",{className:"mb-4 flex",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(I.D,{value:M,onChange:R,total:D}),(0,a.jsxs)(v.l6,{value:z,onValueChange:e=>V(e),children:[(0,a.jsx)(v.bq,{className:"w-[150px] cursor-pointer",children:(0,a.jsx)(v.yv,{placeholder:"Search By"})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"all",children:"Search By"}),(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"studentID",children:"Student ID"}),(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"firstName",children:"First Name"}),(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"lastName",children:"Last Name"}),(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"programCode",children:"Program Code"}),(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"yearLevel",children:"Year Level"}),(0,a.jsx)(v.eb,{className:"cursor-pointer",value:"gender",children:"Gender"})]})]}),(0,a.jsx)(ed,{filters:ee,setFilters:e=>et(t=>e(t)),availableOptions:{yearLevels:[1,2,3,4,5],genders:["Male","Female"],programCodes:Z}})]}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)(C,{onStudentAdded:er})})]}),(0,a.jsx)("div",{className:"container",children:j?(0,a.jsx)(L.E,{className:"container mx-auto h-[600px] rounded-xl py-10"}):0===w.length?(0,a.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"No data."}):(0,a.jsxs)("div",{className:"mb-2 opacity-100 transition-opacity duration-300",children:[(0,a.jsx)(p.b,{columns:(e=e=>{P(e)},t=e=>{$(e)},[{accessorKey:"photoUrl",size:60,header:"Photo",cell:e=>{let{row:t}=e;console.log("Row data:",t.original);let r=t.original.photoUrl,s="".concat(t.original.firstName," ").concat(t.original.lastName);return r?(0,a.jsx)(m.default,{src:r,alt:s,width:40,height:40,className:"!h-10 !w-10 rounded-full object-cover"}):(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 text-xs",children:"N/A"})}},{accessorKey:"studentID",size:150,header:()=>(0,a.jsxs)(l.$,{onClick:()=>{"studentID"===X?_("asc"===Y?"desc":"asc"):(q("studentID"),_("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Student ID","studentID"===X?"asc"===Y?(0,a.jsx)(o.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var t;let{getValue:r}=e;return null!=(t=r())?t:"—"}},{accessorKey:"firstName",header:()=>(0,a.jsxs)(l.$,{onClick:()=>{"firstName"===X?_("asc"===Y?"desc":"asc"):(q("firstName"),_("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["First Name","firstName"===X?"asc"===Y?(0,a.jsx)(o.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var t;let{getValue:r}=e;return null!=(t=r())?t:"—"}},{accessorKey:"lastName",header:()=>(0,a.jsxs)(l.$,{onClick:()=>{"lastName"===X?_("asc"===Y?"desc":"asc"):(q("lastName"),_("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Last Name","lastName"===X?"asc"===Y?(0,a.jsx)(o.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var t;let{getValue:r}=e;return null!=(t=r())?t:"—"}},{accessorKey:"programCode",header:()=>(0,a.jsxs)(l.$,{onClick:()=>{"programCode"===X?_("asc"===Y?"desc":"asc"):(q("programCode"),_("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Program Code","programCode"===X?"asc"===Y?(0,a.jsx)(o.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{let{row:t}=e,r=t.getValue("programCode");return"N/A"===r?(0,a.jsx)("span",{className:"text-muted-foreground italic",children:"N/A"}):r}},{accessorKey:"yearLevel",header:()=>(0,a.jsxs)(l.$,{onClick:()=>{"yearLevel"===X?_("asc"===Y?"desc":"asc"):(q("yearLevel"),_("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Year Level","yearLevel"===X?"asc"===Y?(0,a.jsx)(o.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var t;let{getValue:r}=e;return null!=(t=r())?t:"—"}},{accessorKey:"gender",header:()=>(0,a.jsxs)(l.$,{onClick:()=>{"gender"===X?_("asc"===Y?"desc":"asc"):(q("gender"),_("asc"))},className:"text-foreground cursor-pointer bg-transparent hover:bg-transparent",children:["Gender","gender"===X?"asc"===Y?(0,a.jsx)(o.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(c.A,{className:"text-primary ml-2 h-4 w-4"}):(0,a.jsx)(d.A,{className:"text-primary ml-2 h-4 w-4"})]}),cell:e=>{var t;let{getValue:r}=e;return null!=(t=r())?t:"—"}},{id:"actions",size:100,cell:r=>{let{row:o}=r,c=o.original;return(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",className:"h-5 w-8 cursor-pointer p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(s.A,{className:"h-4 w-4"})]})}),(0,a.jsxs)(n.SQ,{align:"end",children:[(0,a.jsx)(n.lp,{children:"Actions"}),(0,a.jsx)(n.mB,{}),(0,a.jsxs)(l.$,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>e(c),children:[(0,a.jsx)("span",{children:"View"}),(0,a.jsx)(h,{className:"text-muted-foreground h-4 w-4 justify-end"})]}),(0,a.jsx)(n.mB,{className:"mr-2 ml-2"}),(0,a.jsxs)(l.$,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>t(c),children:[(0,a.jsx)("span",{children:"Edit"}),(0,a.jsx)(i.A,{className:"text-muted-foreground ml-auto h-4 w-4 justify-end"})]}),(0,a.jsxs)(l.$,{variant:"ghost",className:"flex w-full cursor-pointer justify-between",onClick:()=>O(c),children:[(0,a.jsx)("span",{children:"Delete"}),(0,a.jsx)(u.A,{className:"text-muted-foreground h-4 w-4 justify-end"})]})]})]})})}}]),data:w,page:K,totalPages:H,setPage:B}),T&&(0,a.jsx)(J,{student:T,visible:!0,onClose:()=>P(null)}),U&&(0,a.jsx)(S,{student:U,visible:!0,onClose:()=>$(null),onStudentUpdated:()=>{er(),$(null)}}),G&&(0,a.jsx)(k,{student:G,visible:!0,onClose:()=>O(null),onStudentDeleted:()=>{er(),O(null)}})]})})]}):(0,a.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"Redirecting to login..."})}}},e=>{e.O(0,[186,1,179,40,897,239,91,503,52,441,255,358],()=>e(e.s=68400)),_N_E=e.O()}]);