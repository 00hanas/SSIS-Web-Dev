(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{161:(e,t,a)=>{"use strict";a.d(t,{i:()=>n});var r=a(12115);function n(){let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("http://127.0.0.1:5000/api/auth/ping",{method:"GET",credentials:"include"}),a=await e.json();e.ok&&t(a.user)}catch(e){console.error("Failed to fetch user",e)}}()},[]),e}},4259:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(12115),n=a(20063);function s(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!0),o=(0,n.useRouter)();return(0,r.useEffect)(()=>{(async()=>{let e=0;for(;e<3;)try{let e=await fetch("http://127.0.0.1:5000/api/auth/ping",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("Ping response:",e.status),!e.ok)throw Error("Unauthorized");if((await e.json()).user_id)return void t(!0)}catch(t){e++,await new Promise(e=>setTimeout(e,300))}o.push("/login")})().finally(()=>s(!1))},[o]),{authenticated:e,loading:a,logout:async()=>{try{await fetch("http://127.0.0.1:5000/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}finally{o.push("/login")}}}}},8525:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=(0,a(63503).UU)("https://liofppzunluhdsrbwogc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxpb2ZwcHp1bmx1aGRzcmJ3b2djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3OTAyODQsImV4cCI6MjA3ODM2NjI4NH0.AHUpJy0wD4HEw1ImsdL4CKWYvLn0sfUelXUH_VmQpNM")},10561:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var r=a(95155),n=a(12115),s=a(57280),o=a(68425),l=a(47734),c=a(77568),i=a(83209),d=a(26991),u=a(23508),h=a(7620),p=a(25016);let f={light:"",dark:".dark"},m=n.createContext(null);function g(){let e=n.useContext(m);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}function x(e){let{id:t,className:a,children:s,config:o,...l}=e,c=n.useId(),i="chart-".concat(t||c.replace(/:/g,""));return(0,r.jsx)(m.Provider,{value:{config:o},children:(0,r.jsxs)("div",{"data-slot":"chart","data-chart":i,className:(0,p.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",a),...l,children:[(0,r.jsx)(j,{id:i,config:o}),(0,r.jsx)(d.u,{children:s})]})})}let j=e=>{let{id:t,config:a}=e,n=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(f).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[r,n]=e,s=(null==(t=n.theme)?void 0:t[a])||n.color;return s?"  --color-".concat(r,": ").concat(s,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},v=u.m;function w(e){let{active:t,payload:a,className:s,indicator:o="dot",hideLabel:l=!1,hideIndicator:c=!1,label:i,labelFormatter:d,labelClassName:u,formatter:h,color:f,nameKey:m,labelKey:x}=e,{config:j}=g(),v=n.useMemo(()=>{var e;if(l||!(null==a?void 0:a.length))return null;let[t]=a,n="".concat(x||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),s=N(j,t,n),o=x||"string"!=typeof i?null==s?void 0:s.label:(null==(e=j[i])?void 0:e.label)||i;return d?(0,r.jsx)("div",{className:(0,p.cn)("font-medium",u),children:d(o,a)}):o?(0,r.jsx)("div",{className:(0,p.cn)("font-medium",u),children:o}):null},[i,d,a,l,u,j,x]);if(!t||!(null==a?void 0:a.length))return null;let w=1===a.length&&"dot"!==o;return(0,r.jsxs)("div",{className:(0,p.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",s),children:[w?null:v,(0,r.jsx)("div",{className:"grid gap-1.5",children:a.filter(e=>"none"!==e.type).map((e,t)=>{let a="".concat(m||e.name||e.dataKey||"value"),n=N(j,e,a),s=f||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,p.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===o&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==n?void 0:n.icon)?(0,r.jsx)(n.icon,{}):!c&&(0,r.jsx)("div",{className:(0,p.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":w&&"dashed"===o}),style:{"--color-bg":s,"--color-border":s}}),(0,r.jsxs)("div",{className:(0,p.cn)("flex flex-1 justify-between leading-none",w?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[w?v:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}let y=h.s;function b(e){let{className:t,hideIcon:a=!1,payload:n,verticalAlign:s="bottom",nameKey:o}=e,{config:l}=g();return(null==n?void 0:n.length)?(0,r.jsx)("div",{className:(0,p.cn)("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",t),children:n.filter(e=>"none"!==e.type).map(e=>{let t="".concat(o||e.dataKey||"value"),n=N(l,e,t);return(0,r.jsxs)("div",{className:(0,p.cn)("[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3"),children:[(null==n?void 0:n.icon)&&!a?(0,r.jsx)(n.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==n?void 0:n.label]},e.value)})}):null}function N(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=a;return a in t&&"string"==typeof t[a]?n=t[a]:r&&a in r&&"string"==typeof r[a]&&(n=r[a]),n in e?e[n]:e[a]}var E=a(61184);function T(){let[e,t]=n.useState([]);return n.useEffect(()=>{(0,E.tC)().then(t).catch(e=>console.error("Failed to load chart data:",e))},[]),(0,r.jsxs)(i.Zp,{className:"h-107.5",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Student Distribution"}),(0,r.jsx)(i.BT,{children:"Showing total number of students grouped by program."})]}),(0,r.jsx)(i.Wu,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:(0,r.jsx)(x,{config:{count:{label:"Students",color:"var(--accent)"}},className:"aspect-auto h-[250px] w-full",children:(0,r.jsxs)(s.Q,{data:e,children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"fillCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"var(--accent)",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"95%",stopColor:"var(--accent)",stopOpacity:.1})]})}),(0,r.jsx)(o.d,{vertical:!1}),(0,r.jsx)(l.W,{dataKey:"programCode",tickLine:!1,axisLine:!1,tickMargin:8}),(0,r.jsx)(v,{cursor:!1,content:(0,r.jsx)(w,{indicator:"dot",labelFormatter:e=>"Program: ".concat(e)})}),(0,r.jsx)(c.G,{dataKey:"count",type:"monotone",fill:"url(#fillCount)",stroke:"var(--primary)"}),(0,r.jsx)(y,{content:(0,r.jsx)(b,{})})]})})})]})}function k(e){let{name:t}=e;return(0,r.jsxs)(i.Zp,{className:"\n            h-27 shadow-xl hover:scale-[1.01] hover:shadow-lg\n        ",children:[(0,r.jsx)(i.aR,{className:"pb-0",children:(0,r.jsxs)(i.ZB,{className:"text-2xl font-bold",children:["Welcome back, ",t,"!"]})}),(0,r.jsx)(i.Wu,{className:"-mt-7 text-muted-foreground",children:(0,r.jsx)("p",{className:"text-sm",children:"Always stay updated in your student portal."})})]})}var C=a(52619),S=a.n(C);function _(e){let{colleges:t,programs:a,students:n}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 mb-5",children:[{title:"Total Colleges",value:t,href:"/colleges"},{title:"Total Programs",value:a,href:"/programs"},{title:"Total Students",value:n,href:"/students"}].map(e=>(0,r.jsx)(S(),{href:e.href,children:(0,r.jsxs)(i.Zp,{className:"\n              bg-gradient-to-b from-[var(--header-gradient-from)] to-[var(--header-gradient-to)] transition-transform hover:scale-105 hover:shadow-lg\n              cursor-pointer rounded-2xl h-40\n            ",children:[(0,r.jsx)(i.aR,{className:"pb-0",children:(0,r.jsx)(i.ZB,{className:"text-lg",children:e.title})}),(0,r.jsx)(i.Wu,{className:"pt-0",children:(0,r.jsx)("p",{className:"text-4xl font-bold justify-end",children:e.value})})]})},e.title))})}var F=a(47507),G=a(72907),U=a(15239);function P(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)("all"),[o,l]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,G.em)();t(e)}catch(e){console.error("Failed to load programs:",e)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,E.cm)(a);l(e)}catch(e){console.error("Failed to load students:",e)}})()},[a]),(0,r.jsxs)(i.Zp,{className:"h-[400px] rounded-2xl",children:[(0,r.jsxs)(i.aR,{className:"flex flex-row items-center justify-between gap-5",children:[(0,r.jsx)(i.ZB,{className:"text-lg font-bold",children:"Students"}),(0,r.jsxs)(F.l6,{onValueChange:e=>s(e),defaultValue:"all",children:[(0,r.jsx)(F.bq,{className:"w-[100px] cursor-pointer text-xs",children:(0,r.jsx)(F.yv,{placeholder:"Select Program"})}),(0,r.jsxs)(F.gC,{children:[(0,r.jsx)(F.eb,{className:"text-xs",value:"all",children:"All"}),e.map(e=>(0,r.jsx)(F.eb,{className:"cursor-pointer text-xs",value:e.programCode,children:e.programCode},e.programCode))]})]})]}),(0,r.jsx)(i.Wu,{className:"h-[340px] overflow-y-auto",children:0===o.length?(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"No students found."}):(0,r.jsx)("ul",{className:"space-y-2",children:o.map(e=>(0,r.jsxs)("li",{className:"bg-muted/30 dark:bg-muted/10 hover:bg-accent/40 dark:hover:bg-accent/40 flex items-center gap-3 rounded-lg p-3 transition",children:[(0,r.jsx)(U.default,{src:e.photoUrl||"/default-profile.png",alt:"".concat(e.firstName," ").concat(e.lastName),width:150,height:150,className:"h-8 w-8 rounded-full object-cover"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,r.jsxs)("span",{className:"text-accent dark:text-accent/70 text-xs",children:["Year Level: ",e.yearLevel]})]})]},e.studentID))})})]})}var I=a(161),O=a(78765),L=a(12235),z=a(69386);let Z=["var(--accent)","var(--popover-foreground)"];function R(e){let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0];return(0,r.jsxs)("div",{className:"bg-popover rounded-md border px-3 py-2 text-sm shadow-md",children:[(0,r.jsx)("p",{className:"text-foreground font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:[e.value," students"]})]})}return null}function J(){let[e,t]=n.useState([]),[a,s]=n.useState(!1);return(n.useEffect(()=>{s(!0),(0,E.lM)().then(t).catch(e=>console.error("Failed to fetch gender distribution:",e))},[]),a)?(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{className:"pb-0",children:[(0,r.jsx)(i.ZB,{children:"Gender Distribution"}),(0,r.jsx)(i.BT,{className:"pb-0",children:"Showing proportion of students by gender"})]}),(0,r.jsx)(i.Wu,{className:"-mt-7 flex justify-center",children:(0,r.jsx)(d.u,{width:"100%",height:200,children:(0,r.jsxs)(O.r,{children:[(0,r.jsx)(L.F,{data:e,dataKey:"count",nameKey:"gender",cx:"50%",cy:"50%",outerRadius:70,innerRadius:30,label:!0,children:e.map((e,t)=>(0,r.jsx)(z.f,{fill:Z[t%Z.length]},"cell-".concat(t)))}),(0,r.jsx)(u.m,{content:(0,r.jsx)(R,{})})]})})})]}):(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.aR,{className:"pb-0",children:[(0,r.jsx)(i.ZB,{children:"Gender Distribution"}),(0,r.jsx)(i.BT,{children:"Loadingâ€¦"})]})})}var B=a(4259),D=a(68122);function A(){return(0,r.jsx)("div",{className:"container w-full justify-center p-6",children:(0,r.jsxs)("div",{className:"mb-5 flex flex-row gap-5",children:[(0,r.jsxs)("div",{className:"flex-1 flex-col space-y-5",children:[(0,r.jsx)(D.E,{className:"h-27 w-full rounded-xl"}),(0,r.jsxs)("div",{className:"mb-5 grid grid-cols-1 gap-5 md:grid-cols-3",children:[(0,r.jsx)(D.E,{className:"h-30 w-full rounded-xl"}),(0,r.jsx)(D.E,{className:"h-30 w-full rounded-xl"}),(0,r.jsx)(D.E,{className:"h-30 w-full rounded-xl"})]}),(0,r.jsx)(D.E,{className:"h-107.5 w-full rounded-xl"})]}),(0,r.jsxs)("div",{className:"ml-auto w-[300px] flex-col space-y-5",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(D.E,{className:"h-[400px] w-full rounded-xl"})}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(D.E,{className:"h-[270px] w-full rounded-xl"})})]})]})})}var M=a(69818);async function W(){let e=await (0,M.bd)(),t=await (0,M.lC)();return{colleges:e.colleges,total:t}}async function K(){let e=await (0,G.C$)(),t=await (0,G.ys)();return{programs:e.programs,total:t}}async function V(){let e=await (0,E.VN)(),t=await (0,E.tH)();return{students:e.students,total:t}}function H(){var e;let t=(0,I.i)(),{authenticated:a,loading:s}=(0,B.A)(),[o,l]=(0,n.useState)(0),[c,i]=(0,n.useState)(0),[d,u]=(0,n.useState)(0);return((0,n.useEffect)(()=>{(async()=>{try{let{total:e}=await W();l(e)}catch(e){console.error("Failed to load colleges:",e)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let{total:e}=await K();i(e)}catch(e){console.error("Failed to load programs:",e)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let{total:e}=await V();u(e)}catch(e){console.error("Failed to load students:",e)}})()},[]),s)?(0,r.jsx)(A,{}):a||s?(0,r.jsx)("div",{className:"container w-full justify-center p-6",children:(0,r.jsxs)("div",{className:"mb-5 flex flex-row gap-5",children:[(0,r.jsxs)("div",{className:"flex-1 flex-col space-y-5",children:[(0,r.jsx)(k,{name:null!=(e=null==t?void 0:t.name)?e:"Guest"}),(0,r.jsx)(_,{colleges:o,programs:c,students:d}),(0,r.jsx)(T,{})]}),(0,r.jsxs)("div",{className:"ml-auto flex-col space-y-5",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(P,{})}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(J,{})})]})]})}):(0,r.jsx)("div",{className:"text-muted-foreground py-6 text-center",children:"Redirecting to login..."})}},25016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(2821),n=a(75889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},47507:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>p,gC:()=>h,l6:()=>i,yv:()=>d});var r=a(95155);a(12115);var n=a(72799),s=a(24033),o=a(5917),l=a(12108),c=a(25016);function i(e){let{...t}=e;return(0,r.jsx)(n.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,r.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:o,...l}=e;return(0,r.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":a,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[o,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(s.A,{className:"size-4 opacity-50"})})]})}function h(e){let{className:t,children:a,position:s="popper",...o}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...o,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,r.jsx)(m,{})]})})}function p(e){let{className:t,children:a,...s}=e;return(0,r.jsxs)(n.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(o.A,{className:"size-4"})})}),(0,r.jsx)(n.p4,{children:a})]})}function f(e){let{className:t,...a}=e;return(0,r.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(l.A,{className:"size-4"})})}function m(e){let{className:t,...a}=e;return(0,r.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(s.A,{className:"size-4"})})}},61184:(e,t,a)=>{"use strict";a.d(t,{LP:()=>d,O7:()=>g,VN:()=>s,cm:()=>u,dp:()=>i,j6:()=>x,jJ:()=>m,kd:()=>o,lM:()=>p,oC:()=>c,s5:()=>l,tC:()=>h,tH:()=>f});var r=a(8525);let n="http://127.0.0.1:5000/api/students",s=async()=>{let e=await fetch("".concat(n,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();return console.log("Fetched students:",t.students),t},o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"studentID",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",l=new URLSearchParams({page:e.toString(),per_page:t.toString(),search:a,searchBy:"all"===r?"all":r,sortBy:s,order:o}),c=await fetch("".concat(n,"?").concat(l.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await c.json();return console.log("Total students:",i.total),i},l=async(e,t,a,r,s,o,l)=>{let c=await fetch("".concat(n,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentID:e,firstName:t,lastName:a,programCode:r,yearLevel:s,gender:o,photoUrl:l})});if(!c.ok)throw Error((await c.json()).error||"Unknown error");return await c.json()},c=async e=>{let t=await fetch("".concat(n,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw console.error("Fetch failed with status:",t.status),Error("Failed to fetch student");let a=await t.json();return console.log("Fetched student:",a),a},i=async(e,t,a,r,s,o,l,c)=>{let i=await fetch("".concat(n,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentID:t,firstName:a,lastName:r,programCode:s,yearLevel:o,gender:l,photoUrl:c})}),d=await i.json();if(!i.ok)throw Error(d.error||"Failed to update student");return d.student},d=async e=>{let t=await fetch("".concat(n,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).message||"Failed to delete student");return await t.json()},u=async e=>{let t=new URLSearchParams;"all"!==e&&t.set("programCode",e);let a=await fetch("".concat(n,"/by-program?").concat(t.toString()),{method:"GET",credentials:"include"});if(!a.ok)throw Error("Failed to fetch students by program");return(await a.json()).students};async function h(){let e=await fetch("http://127.0.0.1:5000/api/students/count-by-program",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch counts");return e.json()}async function p(){let e=await fetch("http://127.0.0.1:5000/api/students/count-by-gender",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch gender counts");return e.json()}async function f(){let e=await fetch("http://127.0.0.1:5000/api/students/total",{method:"GET",credentials:"include"});return(await e.json()).total}async function m(e){try{let t="".concat(e,"/"),{data:a,error:n}=await r.N.storage.from("students-photos").list(t,{limit:1e3});if(n)return void console.error("Error listing files:",n);if(!a||0===a.length)return void console.log("No files found in folder:",t);let s=a.map(e=>"".concat(t).concat(e.name)),{error:o}=await r.N.storage.from("students-photos").remove(s);if(o)return void console.error("Error deleting files:",o);console.log("Deleted all files under ".concat(t))}catch(e){console.error("Unexpected error deleting folder:",e)}}async function g(e,t,a){let n=null;if(e!==t){let{data:a,error:s}=await r.N.storage.from("students-photos").list(e);if(s)return console.error("Error listing files:",s),null;for(let s of a){let a="".concat(e,"/").concat(s.name),o="".concat(t,"/").concat(s.name);await r.N.storage.from("students-photos").copy(a,o),await r.N.storage.from("students-photos").remove([a]);let{data:l}=r.N.storage.from("students-photos").getPublicUrl(o);n=l.publicUrl}}if(a){let{data:e,error:s}=await r.N.storage.from("students-photos").list(t);if(!s&&e&&e.length>0){let a=e.map(e=>"".concat(t,"/").concat(e.name));await r.N.storage.from("students-photos").remove(a)}let o="".concat(t,"/").concat(Date.now(),"-").concat(a.name),{error:l}=await r.N.storage.from("students-photos").upload(o,a,{upsert:!0});if(!l){let{data:e}=r.N.storage.from("students-photos").getPublicUrl(o);n=e.publicUrl}}return n}async function x(e,t){try{let e=t.split("/students-photos/");if(e.length<2)return!1;let a=e[1],{error:n}=await r.N.storage.from("students-photos").remove([a]);if(n)throw n;return!0}catch(e){return console.error("Failed to delete photo:",e),!1}}},68122:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});var r=a(95155),n=a(25016);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:(0,n.cn)("bg-accent/20 animate-pulse rounded-md",t),...a})}},69818:(e,t,a)=>{"use strict";a.d(t,{Av:()=>c,M0:()=>l,N0:()=>i,Uu:()=>s,bd:()=>n,lC:()=>u,pZ:()=>d,vf:()=>o});let r="http://127.0.0.1:5000/api/colleges",n=async()=>{let e=await fetch("".concat(r,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();return console.log("Fetched colleges:",t.colleges),t},s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"collegeCode",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",l=new URLSearchParams({page:e.toString(),per_page:t.toString(),search:a,searchBy:"all"===n?"all":n,sortBy:s,order:o}),c=await fetch("".concat(r,"?").concat(l.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await c.json();return console.log("Total colleges:",i.total),i},o=async()=>{let e=await fetch("".concat(r,"/dropdown"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Server returned:",await e.text()),Error("Failed to fetch colleges");return(await e.json()).colleges},l=async(e,t)=>{let a=await fetch("".concat(r,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({collegeCode:e,collegeName:t})});if(!a.ok)throw Error((await a.json()).error||"Unknown error");return await a.json()},c=async e=>{let t=await fetch("".concat(r,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw console.error("Fetch failed with status:",t.status),Error("Failed to fetch college");return await t.json()},i=async(e,t,a)=>{let n=await fetch("".concat(r,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({collegeCode:t,collegeName:a})}),s=await n.json();if(!n.ok)throw Error(s.error||"Failed to update college");return s.college},d=async e=>{let t=await fetch("".concat(r,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}),a=t.headers.get("content-type");if(!t.ok)if(null==a?void 0:a.includes("application/json"))throw Error((await t.json()).error||"Failed to delete college");else throw Error("Unexpected server error");return await t.json()};async function u(){let e=await fetch("http://127.0.0.1:5000/api/colleges/total",{method:"GET",credentials:"include"});return(await e.json()).total}},72907:(e,t,a)=>{"use strict";a.d(t,{C$:()=>n,El:()=>i,GD:()=>d,VC:()=>s,Xv:()=>c,em:()=>o,rC:()=>l,ys:()=>u});let r="http://127.0.0.1:5000/api/programs",n=async()=>{let e=await fetch("".concat(r,"/list"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();return console.log("Fetched programs:",t.programs),t},s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"programCode",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"asc",l=new URLSearchParams({page:e.toString(),per_page:t.toString(),search:a,searchBy:"all"===n?"all":n,sortBy:s,order:o}),c=await fetch("".concat(r,"?").concat(l.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await c.json();return console.log("Total programs:",i.total),i},o=async()=>{let e=await fetch("".concat(r,"/dropdown"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Server returned:",await e.text()),Error("Failed to fetch programs");return(await e.json()).programs},l=async(e,t,a)=>{let n=await fetch("".concat(r,"/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({programCode:e,programName:t,collegeCode:a})});if(!n.ok)throw Error((await n.json()).error||"Unknown error");return await n.json()},c=async e=>{let t=await fetch("".concat(r,"/").concat(e),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw console.error("Fetch failed with status:",t.status),Error("Failed to fetch program");let a=await t.json();return console.log("Fetched program:",a),a},i=async(e,t,a,n)=>{let s=await fetch("".concat(r,"/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({programCode:t,programName:a,collegeCode:n})}),o=await s.json();if(!s.ok)throw Error(o.error||"Failed to update program");return o.program},d=async e=>{let t=await fetch("".concat(r,"/").concat(e),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).message||"Failed to delete program");return await t.json()};async function u(){let e=await fetch("http://127.0.0.1:5000/api/programs/total",{method:"GET",credentials:"include"});return(await e.json()).total}},83209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>i,ZB:()=>l,Zp:()=>s,aR:()=>o});var r=a(95155);a(12115);var n=a(25016);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}},83568:(e,t,a)=>{Promise.resolve().then(a.bind(a,10561))}},e=>{e.O(0,[186,629,14,239,503,856,441,255,358],()=>e(e.s=83568)),_N_E=e.O()}]);